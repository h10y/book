<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Shiny App for Testing Load Balancing | Hosting Shiny Applications for R and Python</title>
  <meta name="description" content="Everything you wanted to know about hosting Shiny apps." />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Shiny App for Testing Load Balancing | Hosting Shiny Applications for R and Python" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://hostingshiny.com//images/logos/book_cover.jpg" />
  <meta property="og:description" content="Everything you wanted to know about hosting Shiny apps." />
  <meta name="github-repo" content="analythium/hosting-shiny-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Shiny App for Testing Load Balancing | Hosting Shiny Applications for R and Python" />
  <meta name="twitter:site" content="@analythium" />
  <meta name="twitter:description" content="Everything you wanted to know about hosting Shiny apps." />
  <meta name="twitter:image" content="https://hostingshiny.com//images/logos/book_cover.jpg" />

<meta name="author" content="Péter Sólymos and Kalvin Eng" />


<meta name="date" content="2024-07-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/logos/favicons/apple-touch-icon.png" />
  <link rel="shortcut icon" href="images/logos/favicons/favicon.ico" type="image/x-icon" />
<link rel="prev" href="appendix-bananas.html"/>
<link rel="next" href="appendix-how-to-pick.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-18.2.0/react.min.js"></script>
<script src="libs/react-18.2.0/react-dom.min.js"></script>
<script src="libs/reactwidget-2.0.0/react-tools.umd.cjs"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/reactable-0.4.4/reactable.css" rel="stylesheet" />
<script src="libs/reactable-binding-0.4.4/reactable.js"></script>
<script src="https://cdn.usefathom.com/script.js" data-site="PASYTARS" defer></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="foreword.html"><a href="foreword.html"><i class="fa fa-check"></i>Foreword</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#motivation"><i class="fa fa-check"></i>Motivation</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#who-is-this-book-for"><i class="fa fa-check"></i>Who Is This Book For?</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#what-will-you-learn"><i class="fa fa-check"></i>What Will You Learn?</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#what-will-you-not-learn"><i class="fa fa-check"></i>What Will You Not Learn?</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#conventions"><i class="fa fa-check"></i>Conventions</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#about-the-authors"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>I Getting Started</b></span></li>
<li class="chapter" data-level="1" data-path="1-background.html"><a href="1-background.html"><i class="fa fa-check"></i><b>1</b> Background</a>
<ul>
<li class="chapter" data-level="1.1" data-path="1-background.html"><a href="1-background.html#data-intensive-apps"><i class="fa fa-check"></i><b>1.1</b> Data-intensive Apps</a></li>
<li class="chapter" data-level="1.2" data-path="1-background.html"><a href="1-background.html#enter-shiny"><i class="fa fa-check"></i><b>1.2</b> Enter Shiny</a></li>
<li class="chapter" data-level="1.3" data-path="1-background.html"><a href="1-background.html#application-development"><i class="fa fa-check"></i><b>1.3</b> Application Development</a></li>
<li class="chapter" data-level="1.4" data-path="1-background.html"><a href="1-background.html#application-hosting"><i class="fa fa-check"></i><b>1.4</b> Application Hosting</a></li>
<li class="chapter" data-level="1.5" data-path="1-background.html"><a href="1-background.html#the-devops-cycle"><i class="fa fa-check"></i><b>1.5</b> The DevOps Cycle</a></li>
<li class="chapter" data-level="1.6" data-path="1-background.html"><a href="1-background.html#the-hosting-cycle"><i class="fa fa-check"></i><b>1.6</b> The Hosting Cycle</a></li>
<li class="chapter" data-level="1.7" data-path="1-background.html"><a href="1-background.html#summary"><i class="fa fa-check"></i><b>1.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-hosting-concepts.html"><a href="2-hosting-concepts.html"><i class="fa fa-check"></i><b>2</b> Hosting Concepts</a>
<ul>
<li class="chapter" data-level="2.1" data-path="2-hosting-concepts.html"><a href="2-hosting-concepts.html#domains-and-networking"><i class="fa fa-check"></i><b>2.1</b> Domains and Networking</a></li>
<li class="chapter" data-level="2.2" data-path="2-hosting-concepts.html"><a href="2-hosting-concepts.html#website-technologies"><i class="fa fa-check"></i><b>2.2</b> Website Technologies</a></li>
<li class="chapter" data-level="2.3" data-path="2-hosting-concepts.html"><a href="2-hosting-concepts.html#servers"><i class="fa fa-check"></i><b>2.3</b> Servers</a></li>
<li class="chapter" data-level="2.4" data-path="2-hosting-concepts.html"><a href="2-hosting-concepts.html#hosting-environments"><i class="fa fa-check"></i><b>2.4</b> Hosting Environments</a></li>
<li class="chapter" data-level="2.5" data-path="2-hosting-concepts.html"><a href="2-hosting-concepts.html#summary-1"><i class="fa fa-check"></i><b>2.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-local-setup.html"><a href="3-local-setup.html"><i class="fa fa-check"></i><b>3</b> Local Setup</a>
<ul>
<li class="chapter" data-level="3.1" data-path="3-local-setup.html"><a href="3-local-setup.html#installing-your-developer-tools"><i class="fa fa-check"></i><b>3.1</b> Installing Your Developer Tools</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="3-local-setup.html"><a href="3-local-setup.html#r"><i class="fa fa-check"></i><b>3.1.1</b> R</a></li>
<li class="chapter" data-level="3.1.2" data-path="3-local-setup.html"><a href="3-local-setup.html#install-python"><i class="fa fa-check"></i><b>3.1.2</b> Install Python</a></li>
<li class="chapter" data-level="3.1.3" data-path="3-local-setup.html"><a href="3-local-setup.html#web-browser"><i class="fa fa-check"></i><b>3.1.3</b> Web Browser</a></li>
<li class="chapter" data-level="3.1.4" data-path="3-local-setup.html"><a href="3-local-setup.html#quarto"><i class="fa fa-check"></i><b>3.1.4</b> Quarto</a></li>
<li class="chapter" data-level="3.1.5" data-path="3-local-setup.html"><a href="3-local-setup.html#docker-desktop"><i class="fa fa-check"></i><b>3.1.5</b> Docker Desktop</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-local-setup.html"><a href="3-local-setup.html#the-command-line"><i class="fa fa-check"></i><b>3.2</b> The Command Line</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="3-local-setup.html"><a href="3-local-setup.html#navigation"><i class="fa fa-check"></i><b>3.2.1</b> Navigation</a></li>
<li class="chapter" data-level="3.2.2" data-path="3-local-setup.html"><a href="3-local-setup.html#editing-files"><i class="fa fa-check"></i><b>3.2.2</b> Editing Files</a></li>
<li class="chapter" data-level="3.2.3" data-path="3-local-setup.html"><a href="3-local-setup.html#file-and-directory-operations"><i class="fa fa-check"></i><b>3.2.3</b> File and Directory Operations</a></li>
<li class="chapter" data-level="3.2.4" data-path="3-local-setup.html"><a href="3-local-setup.html#super-user-access"><i class="fa fa-check"></i><b>3.2.4</b> Super User Access</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="3-local-setup.html"><a href="3-local-setup.html#source-code-management-with-git"><i class="fa fa-check"></i><b>3.3</b> Source Code Management with Git</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="3-local-setup.html"><a href="3-local-setup.html#git-services"><i class="fa fa-check"></i><b>3.3.1</b> Git Services</a></li>
<li class="chapter" data-level="3.3.2" data-path="3-local-setup.html"><a href="3-local-setup.html#git-commands"><i class="fa fa-check"></i><b>3.3.2</b> Git Commands</a></li>
<li class="chapter" data-level="3.3.3" data-path="3-local-setup.html"><a href="3-local-setup.html#gitignore"><i class="fa fa-check"></i><b>3.3.3</b> .gitignore</a></li>
<li class="chapter" data-level="3.3.4" data-path="3-local-setup.html"><a href="3-local-setup.html#branching"><i class="fa fa-check"></i><b>3.3.4</b> Branching</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3-local-setup.html"><a href="3-local-setup.html#servers-1"><i class="fa fa-check"></i><b>3.4</b> Servers</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="3-local-setup.html"><a href="3-local-setup.html#secure-shell-ssh"><i class="fa fa-check"></i><b>3.4.1</b> Secure Shell (SSH)</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="3-local-setup.html"><a href="3-local-setup.html#readability-on-the-command-line"><i class="fa fa-check"></i><b>3.5</b> Readability on the Command Line</a></li>
<li class="chapter" data-level="3.6" data-path="3-local-setup.html"><a href="3-local-setup.html#summary-2"><i class="fa fa-check"></i><b>3.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-examples.html"><a href="4-examples.html"><i class="fa fa-check"></i><b>4</b> Examples</a>
<ul>
<li class="chapter" data-level="4.1" data-path="4-examples.html"><a href="4-examples.html#old-faithful"><i class="fa fa-check"></i><b>4.1</b> Old Faithful</a></li>
<li class="chapter" data-level="4.2" data-path="4-examples.html"><a href="4-examples.html#bananas"><i class="fa fa-check"></i><b>4.2</b> Bananas</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="4-examples.html"><a href="4-examples.html#the-bananas-data-set"><i class="fa fa-check"></i><b>4.2.1</b> The Bananas Data Set</a></li>
<li class="chapter" data-level="4.2.2" data-path="4-examples.html"><a href="4-examples.html#model-training"><i class="fa fa-check"></i><b>4.2.2</b> Model Training</a></li>
<li class="chapter" data-level="4.2.3" data-path="4-examples.html"><a href="4-examples.html#the-shiny-app"><i class="fa fa-check"></i><b>4.2.3</b> The Shiny App</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="4-examples.html"><a href="4-examples.html#load-balancing-test"><i class="fa fa-check"></i><b>4.3</b> Load Balancing Test</a></li>
<li class="chapter" data-level="4.4" data-path="4-examples.html"><a href="4-examples.html#summary-3"><i class="fa fa-check"></i><b>4.4</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>II Shiny Apps</b></span></li>
<li class="chapter" data-level="5" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html"><i class="fa fa-check"></i><b>5</b> Developing Shiny Apps</a>
<ul>
<li class="chapter" data-level="5.1" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#creating-a-shiny-app"><i class="fa fa-check"></i><b>5.1</b> Creating a Shiny App</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#the-user-interface"><i class="fa fa-check"></i><b>5.1.1</b> The User Interface</a></li>
<li class="chapter" data-level="5.1.2" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#the-server-function"><i class="fa fa-check"></i><b>5.1.2</b> The Server Function</a></li>
<li class="chapter" data-level="5.1.3" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#shiny-express"><i class="fa fa-check"></i><b>5.1.3</b> Shiny Express</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#organizing-shiny-apps"><i class="fa fa-check"></i><b>5.2</b> Organizing Shiny Apps</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#single-file"><i class="fa fa-check"></i><b>5.2.1</b> Single file</a></li>
<li class="chapter" data-level="5.2.2" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#multiple-files"><i class="fa fa-check"></i><b>5.2.2</b> Multiple Files</a></li>
<li class="chapter" data-level="5.2.3" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#shiny-app-with-nested-files-structure"><i class="fa fa-check"></i><b>5.2.3</b> Shiny App with Nested Files Structure</a></li>
<li class="chapter" data-level="5.2.4" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#programmatic-cases"><i class="fa fa-check"></i><b>5.2.4</b> Programmatic Cases</a></li>
<li class="chapter" data-level="5.2.5" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#shiny-app-as-an-r-package"><i class="fa fa-check"></i><b>5.2.5</b> Shiny App as an R Package</a></li>
<li class="chapter" data-level="5.2.6" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#dynamic-documents"><i class="fa fa-check"></i><b>5.2.6</b> Dynamic Documents</a></li>
<li class="chapter" data-level="5.2.7" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#shinylive"><i class="fa fa-check"></i><b>5.2.7</b> Shinylive</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#running-shiny-apps-locally"><i class="fa fa-check"></i><b>5.3</b> Running Shiny Apps Locally</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#r-1"><i class="fa fa-check"></i><b>5.3.1</b> R</a></li>
<li class="chapter" data-level="5.3.2" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#python"><i class="fa fa-check"></i><b>5.3.2</b> Python</a></li>
<li class="chapter" data-level="5.3.3" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#the-shiny-app-lifecycle"><i class="fa fa-check"></i><b>5.3.3</b> The Shiny App Lifecycle</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#sharing-the-shiny-app-code"><i class="fa fa-check"></i><b>5.4</b> Sharing the Shiny App Code</a></li>
<li class="chapter" data-level="5.5" data-path="5-developing-shiny-apps.html"><a href="5-developing-shiny-apps.html#summary-4"><i class="fa fa-check"></i><b>5.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html"><i class="fa fa-check"></i><b>6</b> Containerizing Shiny Apps</a>
<ul>
<li class="chapter" data-level="6.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#docker-concepts"><i class="fa fa-check"></i><b>6.1</b> Docker Concepts</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#docker-engine"><i class="fa fa-check"></i><b>6.1.1</b> Docker Engine</a></li>
<li class="chapter" data-level="6.1.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#container-registries"><i class="fa fa-check"></i><b>6.1.2</b> Container Registries</a></li>
<li class="chapter" data-level="6.1.3" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#images"><i class="fa fa-check"></i><b>6.1.3</b> Images</a></li>
<li class="chapter" data-level="6.1.4" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#the-dockerfile"><i class="fa fa-check"></i><b>6.1.4</b> The Dockerfile</a></li>
<li class="chapter" data-level="6.1.5" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#containers"><i class="fa fa-check"></i><b>6.1.5</b> Containers</a></li>
<li class="chapter" data-level="6.1.6" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#the-docker-command-line"><i class="fa fa-check"></i><b>6.1.6</b> The Docker Command Line</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#working-with-existing-images"><i class="fa fa-check"></i><b>6.2</b> Working with Existing Images</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#image-names-and-tags"><i class="fa fa-check"></i><b>6.2.1</b> Image Names and Tags</a></li>
<li class="chapter" data-level="6.2.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#pulling-an-image"><i class="fa fa-check"></i><b>6.2.2</b> Pulling an Image</a></li>
<li class="chapter" data-level="6.2.3" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#docker-login"><i class="fa fa-check"></i><b>6.2.3</b> Docker Login</a></li>
<li class="chapter" data-level="6.2.4" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#running-a-container"><i class="fa fa-check"></i><b>6.2.4</b> Running a Container</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#building-a-new-image"><i class="fa fa-check"></i><b>6.3</b> Building a New Image</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#r-for-shiny"><i class="fa fa-check"></i><b>6.3.1</b> R for Shiny</a></li>
<li class="chapter" data-level="6.3.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#buildx-and-buildkit"><i class="fa fa-check"></i><b>6.3.2</b> Buildx and BuildKit</a></li>
<li class="chapter" data-level="6.3.3" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#inspecting-the-image"><i class="fa fa-check"></i><b>6.3.3</b> Inspecting the Image</a></li>
<li class="chapter" data-level="6.3.4" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#r-for-python"><i class="fa fa-check"></i><b>6.3.4</b> R for Python</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#managing-objects"><i class="fa fa-check"></i><b>6.4</b> Managing Objects</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#images-1"><i class="fa fa-check"></i><b>6.4.1</b> Images</a></li>
<li class="chapter" data-level="6.4.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#containers-1"><i class="fa fa-check"></i><b>6.4.2</b> Containers</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#sharing-images"><i class="fa fa-check"></i><b>6.5</b> Sharing Images</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#pushing-images"><i class="fa fa-check"></i><b>6.5.1</b> Pushing Images</a></li>
<li class="chapter" data-level="6.5.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#docker-registries"><i class="fa fa-check"></i><b>6.5.2</b> Docker Registries</a></li>
<li class="chapter" data-level="6.5.3" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#log-in-to-a-registry"><i class="fa fa-check"></i><b>6.5.3</b> Log In to a Registry</a></li>
<li class="chapter" data-level="6.5.4" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#local-registry"><i class="fa fa-check"></i><b>6.5.4</b> Local Registry</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#the-dockerfile-1"><i class="fa fa-check"></i><b>6.6</b> The Dockerfile</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#the-parent-image"><i class="fa fa-check"></i><b>6.6.1</b> The Parent Image</a></li>
<li class="chapter" data-level="6.6.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#metadata"><i class="fa fa-check"></i><b>6.6.2</b> Metadata</a></li>
<li class="chapter" data-level="6.6.3" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#dependencies"><i class="fa fa-check"></i><b>6.6.3</b> Dependencies</a></li>
<li class="chapter" data-level="6.6.4" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#directories-and-files"><i class="fa fa-check"></i><b>6.6.4</b> Directories and Files</a></li>
<li class="chapter" data-level="6.6.5" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#switching-user"><i class="fa fa-check"></i><b>6.6.5</b> Switching User</a></li>
<li class="chapter" data-level="6.6.6" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#expose-a-port"><i class="fa fa-check"></i><b>6.6.6</b> Expose a Port</a></li>
<li class="chapter" data-level="6.6.7" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#variables"><i class="fa fa-check"></i><b>6.6.7</b> Variables</a></li>
<li class="chapter" data-level="6.6.8" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#executable-and-command"><i class="fa fa-check"></i><b>6.6.8</b> Executable and Command</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#parent-images"><i class="fa fa-check"></i><b>6.7</b> Parent Images</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#popular-parent-images-for-r"><i class="fa fa-check"></i><b>6.7.1</b> Popular Parent Images for R</a></li>
<li class="chapter" data-level="6.7.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#popular-parent-images-for-python"><i class="fa fa-check"></i><b>6.7.2</b> Popular Parent Images for Python</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#installing-system-libraries"><i class="fa fa-check"></i><b>6.8</b> Installing System Libraries</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#manually-installation"><i class="fa fa-check"></i><b>6.8.1</b> Manually Installation</a></li>
<li class="chapter" data-level="6.8.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#automated-dependency-resolution-with-r2u"><i class="fa fa-check"></i><b>6.8.2</b> Automated Dependency Resolution with r2u</a></li>
<li class="chapter" data-level="6.8.3" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#dependencies-on-alpine-linux"><i class="fa fa-check"></i><b>6.8.3</b> Dependencies on Alpine Linux</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#installing-r-packages"><i class="fa fa-check"></i><b>6.9</b> Installing R Packages</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#explicitly-stating-dependencies"><i class="fa fa-check"></i><b>6.9.1</b> Explicitly Stating Dependencies</a></li>
<li class="chapter" data-level="6.9.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#using-the-description-file"><i class="fa fa-check"></i><b>6.9.2</b> Using the DESCRIPTION File</a></li>
<li class="chapter" data-level="6.9.3" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#using-renv"><i class="fa fa-check"></i><b>6.9.3</b> Using renv</a></li>
<li class="chapter" data-level="6.9.4" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#using-deps"><i class="fa fa-check"></i><b>6.9.4</b> Using deps</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#python-requirements"><i class="fa fa-check"></i><b>6.10</b> Python requirements</a>
<ul>
<li class="chapter" data-level="6.10.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#renv"><i class="fa fa-check"></i><b>6.10.1</b> renv</a></li>
<li class="chapter" data-level="6.10.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#pip"><i class="fa fa-check"></i><b>6.10.2</b> pip</a></li>
<li class="chapter" data-level="6.10.3" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#other-options-for-python"><i class="fa fa-check"></i><b>6.10.3</b> Other options for python</a></li>
</ul></li>
<li class="chapter" data-level="6.11" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#dynamic-shiny-apps"><i class="fa fa-check"></i><b>6.11</b> Dynamic Shiny Apps</a>
<ul>
<li class="chapter" data-level="6.11.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#r-2"><i class="fa fa-check"></i><b>6.11.1</b> R</a></li>
<li class="chapter" data-level="6.11.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#python-1"><i class="fa fa-check"></i><b>6.11.2</b> Python</a></li>
<li class="chapter" data-level="6.11.3" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#r-markdown-1"><i class="fa fa-check"></i><b>6.11.3</b> R Markdown</a></li>
<li class="chapter" data-level="6.11.4" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#quarto-with-r-1"><i class="fa fa-check"></i><b>6.11.4</b> Quarto with R</a></li>
<li class="chapter" data-level="6.11.5" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#quarto-with-python-1"><i class="fa fa-check"></i><b>6.11.5</b> Quarto with Python</a></li>
<li class="chapter" data-level="6.11.6" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#shiny-server"><i class="fa fa-check"></i><b>6.11.6</b> Shiny Server</a></li>
</ul></li>
<li class="chapter" data-level="6.12" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#static-shiny-apps"><i class="fa fa-check"></i><b>6.12</b> Static Shiny Apps</a>
<ul>
<li class="chapter" data-level="6.12.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#multi-stage-builds"><i class="fa fa-check"></i><b>6.12.1</b> Multi-stage Builds</a></li>
</ul></li>
<li class="chapter" data-level="6.13" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#best-practices"><i class="fa fa-check"></i><b>6.13</b> Best Practices</a>
<ul>
<li class="chapter" data-level="6.13.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#parent-images-1"><i class="fa fa-check"></i><b>6.13.1</b> Parent Images</a></li>
<li class="chapter" data-level="6.13.2" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#minimize-dependencies"><i class="fa fa-check"></i><b>6.13.2</b> Minimize Dependencies</a></li>
<li class="chapter" data-level="6.13.3" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#cache-and-order-layers"><i class="fa fa-check"></i><b>6.13.3</b> Cache and Order Layers</a></li>
<li class="chapter" data-level="6.13.4" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#switch-to-non-root-user"><i class="fa fa-check"></i><b>6.13.4</b> Switch to Non-root User</a></li>
<li class="chapter" data-level="6.13.5" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#do-not-store-sensitive-info"><i class="fa fa-check"></i><b>6.13.5</b> Do Not Store Sensitive Info</a></li>
<li class="chapter" data-level="6.13.6" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#security-scanning"><i class="fa fa-check"></i><b>6.13.6</b> Security Scanning</a></li>
<li class="chapter" data-level="6.13.7" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#readability"><i class="fa fa-check"></i><b>6.13.7</b> Readability</a></li>
<li class="chapter" data-level="6.13.8" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#automation-maybe-leave-this-for-later"><i class="fa fa-check"></i><b>6.13.8</b> Automation (maybe leave this for later)</a></li>
<li class="chapter" data-level="6.13.9" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#other-things-to-mention"><i class="fa fa-check"></i><b>6.13.9</b> Other things to mention</a></li>
</ul></li>
<li class="chapter" data-level="6.14" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#container-orchestration"><i class="fa fa-check"></i><b>6.14</b> Container Orchestration</a>
<ul>
<li class="chapter" data-level="6.14.1" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#docker-compose"><i class="fa fa-check"></i><b>6.14.1</b> Docker Compose</a></li>
</ul></li>
<li class="chapter" data-level="6.15" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#troubleshooting"><i class="fa fa-check"></i><b>6.15</b> Troubleshooting</a></li>
<li class="chapter" data-level="6.16" data-path="6-containerizing-shiny-apps.html"><a href="6-containerizing-shiny-apps.html#summary-5"><i class="fa fa-check"></i><b>6.16</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>III Hosting Shiny Apps</b></span></li>
<li class="chapter" data-level="7" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html"><i class="fa fa-check"></i><b>7</b> A Review of Shiny Hosting Options</a>
<ul>
<li class="chapter" data-level="7.1" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#start-with-the-why"><i class="fa fa-check"></i><b>7.1</b> Start with the why</a></li>
<li class="chapter" data-level="7.2" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#list-your-requirements"><i class="fa fa-check"></i><b>7.2</b> List your requirements</a></li>
<li class="chapter" data-level="7.3" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#identify-your-constraints"><i class="fa fa-check"></i><b>7.3</b> Identify your constraints</a></li>
<li class="chapter" data-level="7.4" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#options-at-a-glance"><i class="fa fa-check"></i><b>7.4</b> Options at a glance</a></li>
<li class="chapter" data-level="7.5" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#hosting-patterns"><i class="fa fa-check"></i><b>7.5</b> Hosting Patterns</a></li>
<li class="chapter" data-level="7.6" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#the-cloud"><i class="fa fa-check"></i><b>7.6</b> The Cloud</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#servers-2"><i class="fa fa-check"></i><b>7.6.1</b> Servers</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#custom-domain-names"><i class="fa fa-check"></i><b>7.7</b> Custom Domain Names</a></li>
<li class="chapter" data-level="7.8" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#reverse-proxies"><i class="fa fa-check"></i><b>7.8</b> Reverse Proxies</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#install-caddy"><i class="fa fa-check"></i><b>7.8.1</b> Install Caddy</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#monitoring-processes"><i class="fa fa-check"></i><b>7.9</b> Monitoring Processes</a></li>
<li class="chapter" data-level="7.10" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#systemctl"><i class="fa fa-check"></i><b>7.10</b> Systemctl</a></li>
<li class="chapter" data-level="7.11" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#shutdown-and-reboot"><i class="fa fa-check"></i><b>7.11</b> Shutdown and Reboot</a></li>
<li class="chapter" data-level="7.12" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#networkingfirewalls"><i class="fa fa-check"></i><b>7.12</b> Networking/Firewalls</a>
<ul>
<li class="chapter" data-level="7.12.1" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#systemd"><i class="fa fa-check"></i><b>7.12.1</b> systemd</a></li>
</ul></li>
<li class="chapter" data-level="7.13" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#static-shiny-apps-1"><i class="fa fa-check"></i><b>7.13</b> Static Shiny Apps</a>
<ul>
<li class="chapter" data-level="7.13.1" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#compiling-without-containers-r-vs-python"><i class="fa fa-check"></i><b>7.13.1</b> Compiling without containers (R vs Python)</a></li>
<li class="chapter" data-level="7.13.2" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#compiling-with-containers"><i class="fa fa-check"></i><b>7.13.2</b> Compiling with containers</a></li>
<li class="chapter" data-level="7.13.3" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#static-hosting-options"><i class="fa fa-check"></i><b>7.13.3</b> Static Hosting Options</a></li>
</ul></li>
<li class="chapter" data-level="7.14" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#dynamic-shiny-apps-1"><i class="fa fa-check"></i><b>7.14</b> Dynamic Shiny Apps</a>
<ul>
<li class="chapter" data-level="7.14.1" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#hosting-platforms-paas"><i class="fa fa-check"></i><b>7.14.1</b> Hosting platforms (PaaS)</a></li>
<li class="chapter" data-level="7.14.2" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#reverse-proxy-required"><i class="fa fa-check"></i><b>7.14.2</b> Reverse Proxy Required</a></li>
</ul></li>
<li class="chapter" data-level="7.15" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#deploying-static-files-with-shinylive"><i class="fa fa-check"></i><b>7.15</b> Deploying Static Files with Shinylive</a></li>
<li class="chapter" data-level="7.16" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#deploying-shiny-apps-to-shinyapps.io"><i class="fa fa-check"></i><b>7.16</b> Deploying Shiny Apps to Shinyapps.io</a>
<ul>
<li class="chapter" data-level="7.16.1" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#r-3"><i class="fa fa-check"></i><b>7.16.1</b> R</a></li>
<li class="chapter" data-level="7.16.2" data-path="7-a-review-of-shiny-hosting-options.html"><a href="7-a-review-of-shiny-hosting-options.html#python-2"><i class="fa fa-check"></i><b>7.16.2</b> Python</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-considerations-hosting.html"><a href="8-considerations-hosting.html"><i class="fa fa-check"></i><b>8</b> Considerations for Hosting Production Shiny Apps</a>
<ul>
<li class="chapter" data-level="8.1" data-path="8-considerations-hosting.html"><a href="8-considerations-hosting.html#security"><i class="fa fa-check"></i><b>8.1</b> Security</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="8-considerations-hosting.html"><a href="8-considerations-hosting.html#certificates"><i class="fa fa-check"></i><b>8.1.1</b> Certificates</a></li>
<li class="chapter" data-level="8.1.2" data-path="8-considerations-hosting.html"><a href="8-considerations-hosting.html#storing-secrets"><i class="fa fa-check"></i><b>8.1.2</b> Storing Secrets</a></li>
<li class="chapter" data-level="8.1.3" data-path="8-considerations-hosting.html"><a href="8-considerations-hosting.html#shiny-app-authentication"><i class="fa fa-check"></i><b>8.1.3</b> Shiny App Authentication</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="8-considerations-hosting.html"><a href="8-considerations-hosting.html#performance-availability-and-monitoring"><i class="fa fa-check"></i><b>8.2</b> Performance, Availability, and Monitoring</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="8-considerations-hosting.html"><a href="8-considerations-hosting.html#scaling"><i class="fa fa-check"></i><b>8.2.1</b> Scaling</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="8-considerations-hosting.html"><a href="8-considerations-hosting.html#operations-and-maintenance"><i class="fa fa-check"></i><b>8.3</b> Operations and Maintenance</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="8-considerations-hosting.html"><a href="8-considerations-hosting.html#cicd"><i class="fa fa-check"></i><b>8.3.1</b> CI/CD</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="8-considerations-hosting.html"><a href="8-considerations-hosting.html#embedding-onto-your-website"><i class="fa fa-check"></i><b>8.4</b> Embedding Onto Your Website</a></li>
<li class="chapter" data-level="8.5" data-path="8-considerations-hosting.html"><a href="8-considerations-hosting.html#other-stuff"><i class="fa fa-check"></i><b>8.5</b> OTHER STUFF</a></li>
</ul></li>
<li class="part"><span><b>IV What Is Next?</b></span></li>
<li class="chapter" data-level="9" data-path="9-information-about-hosting.html"><a href="9-information-about-hosting.html"><i class="fa fa-check"></i><b>9</b> Information about hosting</a></li>
<li class="chapter" data-level="10" data-path="10-conclusions.html"><a href="10-conclusions.html"><i class="fa fa-check"></i><b>10</b> Conclusions</a></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="" data-path="appendix-bananas.html"><a href="appendix-bananas.html"><i class="fa fa-check"></i>The Bananas Data Set</a></li>
<li class="chapter" data-level="" data-path="appendix-lb-app.html"><a href="appendix-lb-app.html"><i class="fa fa-check"></i>Shiny App for Testing Load Balancing</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-lb-app.html"><a href="appendix-lb-app.html#the-python-version"><i class="fa fa-check"></i>The Python Version</a></li>
<li class="chapter" data-level="" data-path="appendix-lb-app.html"><a href="appendix-lb-app.html#the-r-version"><i class="fa fa-check"></i>The R Version</a></li>
<li class="chapter" data-level="" data-path="appendix-lb-app.html"><a href="appendix-lb-app.html#shinylive-1"><i class="fa fa-check"></i>Shinylive</a></li>
<li class="chapter" data-level="" data-path="appendix-lb-app.html"><a href="appendix-lb-app.html#test-load-balancing"><i class="fa fa-check"></i>Test Load Balancing</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-how-to-pick.html"><a href="appendix-how-to-pick.html"><i class="fa fa-check"></i>How to Pick the Right Hosting Option</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-how-to-pick.html"><a href="appendix-how-to-pick.html#start-with-the-why-1"><i class="fa fa-check"></i>Start with the Why</a></li>
<li class="chapter" data-level="" data-path="appendix-how-to-pick.html"><a href="appendix-how-to-pick.html#list-your-requirements-1"><i class="fa fa-check"></i>List Your Requirements</a></li>
<li class="chapter" data-level="" data-path="appendix-how-to-pick.html"><a href="appendix-how-to-pick.html#identify-your-constraints-1"><i class="fa fa-check"></i>Identify Your Constraints</a></li>
<li class="chapter" data-level="" data-path="appendix-how-to-pick.html"><a href="appendix-how-to-pick.html#options-at-a-glance-1"><i class="fa fa-check"></i>Options at a glance</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-setup.html"><a href="appendix-setup.html"><i class="fa fa-check"></i>Setting Up Your Development Environment</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Hosting Shiny Applications for R and Python</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<html>
<img width='200px' src='https://hosting.analythium.io/content/images/size/w600/2021/03/banner-1.png' alt="Hosting Shiny">
</html>
<div id="appendix-lb-app" class="section level1 unnumbered hasAnchor">
<h1>Shiny App for Testing Load Balancing<a href="appendix-lb-app.html#appendix-lb-app" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Shiny apps can run multiple sessions in the same app instance.
A common problem when scaling the number of replicas for shiny apps is that
traffic might not be sent to the same session and thus the app might randomly fail.</p>
<p>This app is used to determine if the HTTP requests made by the client are correctly
routed back to the same R or Python process for the session.</p>
<p>Both the Python and the R version of the app registers a dynamic route for the client
to try to connect to. The JavaScript code on the client side will repeatedly hit the
dynamic route. The server will send a 200 OK status code only if the client reached
the correct Shiny session, where it originally came from.</p>
<p>The original Python app was written by Joe Cheng and is from the <code>rstudio/py-shiny</code> GitHub repository<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>FIXME: Where you can find it on the Book website.</p>
<div id="the-python-version" class="section level3 unnumbered hasAnchor">
<h3>The Python Version<a href="appendix-lb-app.html#the-python-version" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create a <code>python</code> folder.
Put <code>shiny</code> in the <code>requirements.txt</code> file:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb158-1"><a href="appendix-lb-app.html#cb158-1" tabindex="-1"></a>shiny&gt;=0.2.7</span></code></pre></div>
<p>Copy the app into the <code>app.py</code> file:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb159-1"><a href="appendix-lb-app.html#cb159-1" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> <span class="op">*</span></span>
<span id="cb159-2"><a href="appendix-lb-app.html#cb159-2" tabindex="-1"></a><span class="im">import</span> starlette.responses</span>
<span id="cb159-3"><a href="appendix-lb-app.html#cb159-3" tabindex="-1"></a></span>
<span id="cb159-4"><a href="appendix-lb-app.html#cb159-4" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb159-5"><a href="appendix-lb-app.html#cb159-5" tabindex="-1"></a>    ui.markdown(</span>
<span id="cb159-6"><a href="appendix-lb-app.html#cb159-6" tabindex="-1"></a>        <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb159-7"><a href="appendix-lb-app.html#cb159-7" tabindex="-1"></a><span class="st">        ## Sticky load balancing test - Shiny for Python</span></span>
<span id="cb159-8"><a href="appendix-lb-app.html#cb159-8" tabindex="-1"></a></span>
<span id="cb159-9"><a href="appendix-lb-app.html#cb159-9" tabindex="-1"></a><span class="st">        The purpose of this app is to determine if HTTP </span></span>
<span id="cb159-10"><a href="appendix-lb-app.html#cb159-10" tabindex="-1"></a><span class="st">        requests made by the client are correctly routed </span></span>
<span id="cb159-11"><a href="appendix-lb-app.html#cb159-11" tabindex="-1"></a><span class="st">        back to the same Python process where the session </span></span>
<span id="cb159-12"><a href="appendix-lb-app.html#cb159-12" tabindex="-1"></a><span class="st">        resides. It is only useful for testing deployments </span></span>
<span id="cb159-13"><a href="appendix-lb-app.html#cb159-13" tabindex="-1"></a><span class="st">        that load balance traffic across more than one </span></span>
<span id="cb159-14"><a href="appendix-lb-app.html#cb159-14" tabindex="-1"></a><span class="st">        Python process.</span></span>
<span id="cb159-15"><a href="appendix-lb-app.html#cb159-15" tabindex="-1"></a></span>
<span id="cb159-16"><a href="appendix-lb-app.html#cb159-16" tabindex="-1"></a><span class="st">        If this test fails, it means that sticky load </span></span>
<span id="cb159-17"><a href="appendix-lb-app.html#cb159-17" tabindex="-1"></a><span class="st">        balancing is not working, and certain Shiny </span></span>
<span id="cb159-18"><a href="appendix-lb-app.html#cb159-18" tabindex="-1"></a><span class="st">        functionality (like file upload/download or </span></span>
<span id="cb159-19"><a href="appendix-lb-app.html#cb159-19" tabindex="-1"></a><span class="st">        server-side selectize) are likely to randomly fail.</span></span>
<span id="cb159-20"><a href="appendix-lb-app.html#cb159-20" tabindex="-1"></a><span class="st">        &quot;&quot;&quot;</span></span>
<span id="cb159-21"><a href="appendix-lb-app.html#cb159-21" tabindex="-1"></a>    ),</span>
<span id="cb159-22"><a href="appendix-lb-app.html#cb159-22" tabindex="-1"></a>    ui.tags.div(</span>
<span id="cb159-23"><a href="appendix-lb-app.html#cb159-23" tabindex="-1"></a>        {<span class="st">&quot;class&quot;</span>: <span class="st">&quot;card&quot;</span>},</span>
<span id="cb159-24"><a href="appendix-lb-app.html#cb159-24" tabindex="-1"></a>        ui.tags.div(</span>
<span id="cb159-25"><a href="appendix-lb-app.html#cb159-25" tabindex="-1"></a>            {<span class="st">&quot;class&quot;</span>: <span class="st">&quot;card-body font-monospace&quot;</span>},</span>
<span id="cb159-26"><a href="appendix-lb-app.html#cb159-26" tabindex="-1"></a>            ui.tags.div(<span class="st">&quot;Attempts: &quot;</span>, ui.tags.span(<span class="st">&quot;0&quot;</span>, <span class="bu">id</span><span class="op">=</span><span class="st">&quot;count&quot;</span>)),</span>
<span id="cb159-27"><a href="appendix-lb-app.html#cb159-27" tabindex="-1"></a>            ui.tags.div(<span class="st">&quot;Status: &quot;</span>, ui.tags.span(<span class="bu">id</span><span class="op">=</span><span class="st">&quot;status&quot;</span>)),</span>
<span id="cb159-28"><a href="appendix-lb-app.html#cb159-28" tabindex="-1"></a>            ui.output_ui(<span class="st">&quot;out&quot;</span>),</span>
<span id="cb159-29"><a href="appendix-lb-app.html#cb159-29" tabindex="-1"></a>        ),</span>
<span id="cb159-30"><a href="appendix-lb-app.html#cb159-30" tabindex="-1"></a>    ),</span>
<span id="cb159-31"><a href="appendix-lb-app.html#cb159-31" tabindex="-1"></a>)</span>
<span id="cb159-32"><a href="appendix-lb-app.html#cb159-32" tabindex="-1"></a></span>
<span id="cb159-33"><a href="appendix-lb-app.html#cb159-33" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>: Inputs, output: Outputs, session: Session):</span>
<span id="cb159-34"><a href="appendix-lb-app.html#cb159-34" tabindex="-1"></a>    <span class="at">@output</span></span>
<span id="cb159-35"><a href="appendix-lb-app.html#cb159-35" tabindex="-1"></a>    <span class="at">@render.ui</span></span>
<span id="cb159-36"><a href="appendix-lb-app.html#cb159-36" tabindex="-1"></a>    <span class="kw">def</span> out():</span>
<span id="cb159-37"><a href="appendix-lb-app.html#cb159-37" tabindex="-1"></a>        url <span class="op">=</span> session.dynamic_route(</span>
<span id="cb159-38"><a href="appendix-lb-app.html#cb159-38" tabindex="-1"></a>            <span class="st">&quot;test&quot;</span>,</span>
<span id="cb159-39"><a href="appendix-lb-app.html#cb159-39" tabindex="-1"></a>            <span class="kw">lambda</span> req: starlette.responses.PlainTextResponse(</span>
<span id="cb159-40"><a href="appendix-lb-app.html#cb159-40" tabindex="-1"></a>                <span class="st">&quot;OK&quot;</span>, headers<span class="op">=</span>{<span class="st">&quot;Cache-Control&quot;</span>: <span class="st">&quot;no-cache&quot;</span>}</span>
<span id="cb159-41"><a href="appendix-lb-app.html#cb159-41" tabindex="-1"></a>            ),</span>
<span id="cb159-42"><a href="appendix-lb-app.html#cb159-42" tabindex="-1"></a>        )</span>
<span id="cb159-43"><a href="appendix-lb-app.html#cb159-43" tabindex="-1"></a>        <span class="cf">return</span> ui.tags.script(</span>
<span id="cb159-44"><a href="appendix-lb-app.html#cb159-44" tabindex="-1"></a>            <span class="ss">f&quot;&quot;&quot;</span></span>
<span id="cb159-45"><a href="appendix-lb-app.html#cb159-45" tabindex="-1"></a><span class="ss">            const url = &quot;</span><span class="sc">{</span>url<span class="sc">}</span><span class="ss">&quot;;</span></span>
<span id="cb159-46"><a href="appendix-lb-app.html#cb159-46" tabindex="-1"></a><span class="ss">            const count_el = document.getElementById(&quot;count&quot;);</span></span>
<span id="cb159-47"><a href="appendix-lb-app.html#cb159-47" tabindex="-1"></a><span class="ss">            const status_el = document.getElementById(&quot;status&quot;);</span></span>
<span id="cb159-48"><a href="appendix-lb-app.html#cb159-48" tabindex="-1"></a><span class="ss">            let count = 0;</span></span>
<span id="cb159-49"><a href="appendix-lb-app.html#cb159-49" tabindex="-1"></a><span class="ss">            async function check_url() </span><span class="ch">{{</span></span>
<span id="cb159-50"><a href="appendix-lb-app.html#cb159-50" tabindex="-1"></a><span class="ss">                count_el.innerHTML = ++count;</span></span>
<span id="cb159-51"><a href="appendix-lb-app.html#cb159-51" tabindex="-1"></a><span class="ss">                try </span><span class="ch">{{</span></span>
<span id="cb159-52"><a href="appendix-lb-app.html#cb159-52" tabindex="-1"></a><span class="ss">                    const resp = await fetch(url);</span></span>
<span id="cb159-53"><a href="appendix-lb-app.html#cb159-53" tabindex="-1"></a><span class="ss">                    if (!resp.ok) </span><span class="ch">{{</span></span>
<span id="cb159-54"><a href="appendix-lb-app.html#cb159-54" tabindex="-1"></a><span class="ss">                        status_el.innerHTML = &quot;Failure!&quot;;</span></span>
<span id="cb159-55"><a href="appendix-lb-app.html#cb159-55" tabindex="-1"></a><span class="ss">                        return;</span></span>
<span id="cb159-56"><a href="appendix-lb-app.html#cb159-56" tabindex="-1"></a><span class="ss">                    </span><span class="ch">}}</span><span class="ss"> else </span><span class="ch">{{</span></span>
<span id="cb159-57"><a href="appendix-lb-app.html#cb159-57" tabindex="-1"></a><span class="ss">                        status_el.innerHTML = &quot;In progress&quot;;</span></span>
<span id="cb159-58"><a href="appendix-lb-app.html#cb159-58" tabindex="-1"></a><span class="ss">                    </span><span class="ch">}}</span></span>
<span id="cb159-59"><a href="appendix-lb-app.html#cb159-59" tabindex="-1"></a><span class="ss">                </span><span class="ch">}}</span><span class="ss"> catch(e) </span><span class="ch">{{</span></span>
<span id="cb159-60"><a href="appendix-lb-app.html#cb159-60" tabindex="-1"></a><span class="ss">                    status_el.innerHTML = &quot;Failure!&quot;;</span></span>
<span id="cb159-61"><a href="appendix-lb-app.html#cb159-61" tabindex="-1"></a><span class="ss">                    return;</span></span>
<span id="cb159-62"><a href="appendix-lb-app.html#cb159-62" tabindex="-1"></a><span class="ss">                </span><span class="ch">}}</span></span>
<span id="cb159-63"><a href="appendix-lb-app.html#cb159-63" tabindex="-1"></a><span class="ss">                if (count === 100) </span><span class="ch">{{</span></span>
<span id="cb159-64"><a href="appendix-lb-app.html#cb159-64" tabindex="-1"></a><span class="ss">                    status_el.innerHTML = &quot;Test complete&quot;;</span></span>
<span id="cb159-65"><a href="appendix-lb-app.html#cb159-65" tabindex="-1"></a><span class="ss">                    return;</span></span>
<span id="cb159-66"><a href="appendix-lb-app.html#cb159-66" tabindex="-1"></a><span class="ss">                </span><span class="ch">}}</span></span>
<span id="cb159-67"><a href="appendix-lb-app.html#cb159-67" tabindex="-1"></a><span class="ss">                setTimeout(check_url, 10);</span></span>
<span id="cb159-68"><a href="appendix-lb-app.html#cb159-68" tabindex="-1"></a><span class="ss">            </span><span class="ch">}}</span></span>
<span id="cb159-69"><a href="appendix-lb-app.html#cb159-69" tabindex="-1"></a><span class="ss">            check_url();</span></span>
<span id="cb159-70"><a href="appendix-lb-app.html#cb159-70" tabindex="-1"></a><span class="ss">            &quot;&quot;&quot;</span></span>
<span id="cb159-71"><a href="appendix-lb-app.html#cb159-71" tabindex="-1"></a>        )</span>
<span id="cb159-72"><a href="appendix-lb-app.html#cb159-72" tabindex="-1"></a></span>
<span id="cb159-73"><a href="appendix-lb-app.html#cb159-73" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code></pre></div>
<p>Install the libraries with <code>pip install -r requirements.txt</code>.
Run the app with <code>shiny run --reload --port 8080 python/app.py</code>,
then visit <code>http://127.0.0.1:8080</code> in your browser.
You’ll see a counter running up to 100 and reporting if the test failed or succeeded.</p>
</div>
<div id="the-r-version" class="section level3 unnumbered hasAnchor">
<h3>The R Version<a href="appendix-lb-app.html#the-r-version" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create an <code>r</code> folder.
Put the app code in the <code>app.R</code> file:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="appendix-lb-app.html#cb160-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb160-2"><a href="appendix-lb-app.html#cb160-2" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb160-3"><a href="appendix-lb-app.html#cb160-3" tabindex="-1"></a></span>
<span id="cb160-4"><a href="appendix-lb-app.html#cb160-4" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fixedPage</span>(</span>
<span id="cb160-5"><a href="appendix-lb-app.html#cb160-5" tabindex="-1"></a>    <span class="at">theme =</span> <span class="fu">bs_theme</span>(<span class="at">version =</span> <span class="dv">5</span>), <span class="co"># force BS v5</span></span>
<span id="cb160-6"><a href="appendix-lb-app.html#cb160-6" tabindex="-1"></a>    <span class="fu">markdown</span>(<span class="st">&quot;</span></span>
<span id="cb160-7"><a href="appendix-lb-app.html#cb160-7" tabindex="-1"></a><span class="st">## Sticky load balancing test - Shiny for Python</span></span>
<span id="cb160-8"><a href="appendix-lb-app.html#cb160-8" tabindex="-1"></a></span>
<span id="cb160-9"><a href="appendix-lb-app.html#cb160-9" tabindex="-1"></a><span class="st">The purpose of this app is to determine if HTTP </span></span>
<span id="cb160-10"><a href="appendix-lb-app.html#cb160-10" tabindex="-1"></a><span class="st">requests made by the client are correctly routed </span></span>
<span id="cb160-11"><a href="appendix-lb-app.html#cb160-11" tabindex="-1"></a><span class="st">back to the same R process where the session </span></span>
<span id="cb160-12"><a href="appendix-lb-app.html#cb160-12" tabindex="-1"></a><span class="st">resides. It is only useful for testing deployments </span></span>
<span id="cb160-13"><a href="appendix-lb-app.html#cb160-13" tabindex="-1"></a><span class="st">that load balance traffic across more than one </span></span>
<span id="cb160-14"><a href="appendix-lb-app.html#cb160-14" tabindex="-1"></a><span class="st">R process.</span></span>
<span id="cb160-15"><a href="appendix-lb-app.html#cb160-15" tabindex="-1"></a></span>
<span id="cb160-16"><a href="appendix-lb-app.html#cb160-16" tabindex="-1"></a><span class="st">If this test fails, it means that sticky load </span></span>
<span id="cb160-17"><a href="appendix-lb-app.html#cb160-17" tabindex="-1"></a><span class="st">balancing is not working, and certain Shiny </span></span>
<span id="cb160-18"><a href="appendix-lb-app.html#cb160-18" tabindex="-1"></a><span class="st">functionality (like file upload/download or </span></span>
<span id="cb160-19"><a href="appendix-lb-app.html#cb160-19" tabindex="-1"></a><span class="st">server-side selectize) are likely to randomly fail.</span></span>
<span id="cb160-20"><a href="appendix-lb-app.html#cb160-20" tabindex="-1"></a><span class="st">    &quot;</span>),</span>
<span id="cb160-21"><a href="appendix-lb-app.html#cb160-21" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">div</span>(</span>
<span id="cb160-22"><a href="appendix-lb-app.html#cb160-22" tabindex="-1"></a>        <span class="at">class =</span> <span class="st">&quot;card&quot;</span>,</span>
<span id="cb160-23"><a href="appendix-lb-app.html#cb160-23" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">div</span>(</span>
<span id="cb160-24"><a href="appendix-lb-app.html#cb160-24" tabindex="-1"></a>            <span class="at">class =</span> <span class="st">&quot;card-body font-monospace&quot;</span>,</span>
<span id="cb160-25"><a href="appendix-lb-app.html#cb160-25" tabindex="-1"></a>            tags<span class="sc">$</span><span class="fu">div</span>(<span class="st">&quot;Attempts: &quot;</span>, tags<span class="sc">$</span><span class="fu">span</span>(<span class="at">id=</span><span class="st">&quot;count&quot;</span>, <span class="st">&quot;0&quot;</span>)),</span>
<span id="cb160-26"><a href="appendix-lb-app.html#cb160-26" tabindex="-1"></a>            tags<span class="sc">$</span><span class="fu">div</span>(<span class="st">&quot;Status: &quot;</span>, tags<span class="sc">$</span><span class="fu">span</span>(<span class="at">id=</span><span class="st">&quot;status&quot;</span>)),</span>
<span id="cb160-27"><a href="appendix-lb-app.html#cb160-27" tabindex="-1"></a>            <span class="fu">uiOutput</span>(<span class="st">&quot;out&quot;</span>)</span>
<span id="cb160-28"><a href="appendix-lb-app.html#cb160-28" tabindex="-1"></a>        )</span>
<span id="cb160-29"><a href="appendix-lb-app.html#cb160-29" tabindex="-1"></a>    )</span>
<span id="cb160-30"><a href="appendix-lb-app.html#cb160-30" tabindex="-1"></a>)</span>
<span id="cb160-31"><a href="appendix-lb-app.html#cb160-31" tabindex="-1"></a></span>
<span id="cb160-32"><a href="appendix-lb-app.html#cb160-32" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb160-33"><a href="appendix-lb-app.html#cb160-33" tabindex="-1"></a></span>
<span id="cb160-34"><a href="appendix-lb-app.html#cb160-34" tabindex="-1"></a>    url <span class="ot">&lt;-</span> session<span class="sc">$</span><span class="fu">registerDataObj</span>(</span>
<span id="cb160-35"><a href="appendix-lb-app.html#cb160-35" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;test&quot;</span>,</span>
<span id="cb160-36"><a href="appendix-lb-app.html#cb160-36" tabindex="-1"></a>        <span class="at">data   =</span> <span class="fu">list</span>(),</span>
<span id="cb160-37"><a href="appendix-lb-app.html#cb160-37" tabindex="-1"></a>        <span class="at">filter =</span> <span class="cf">function</span>(data, req) {</span>
<span id="cb160-38"><a href="appendix-lb-app.html#cb160-38" tabindex="-1"></a>            <span class="fu">message</span>(<span class="st">&quot;INFO: &quot;</span>,</span>
<span id="cb160-39"><a href="appendix-lb-app.html#cb160-39" tabindex="-1"></a>                req<span class="sc">$</span>REMOTE_ADDR, <span class="st">&quot;:&quot;</span>,</span>
<span id="cb160-40"><a href="appendix-lb-app.html#cb160-40" tabindex="-1"></a>                req<span class="sc">$</span>REMOTE_PORT,</span>
<span id="cb160-41"><a href="appendix-lb-app.html#cb160-41" tabindex="-1"></a>                <span class="st">&quot; - &quot;</span>,</span>
<span id="cb160-42"><a href="appendix-lb-app.html#cb160-42" tabindex="-1"></a>                req<span class="sc">$</span>REQUEST_METHOD,</span>
<span id="cb160-43"><a href="appendix-lb-app.html#cb160-43" tabindex="-1"></a>                <span class="st">&quot; /session/&quot;</span>,</span>
<span id="cb160-44"><a href="appendix-lb-app.html#cb160-44" tabindex="-1"></a>                session<span class="sc">$</span>token,</span>
<span id="cb160-45"><a href="appendix-lb-app.html#cb160-45" tabindex="-1"></a>                req<span class="sc">$</span>PATH_INFO,</span>
<span id="cb160-46"><a href="appendix-lb-app.html#cb160-46" tabindex="-1"></a>                req<span class="sc">$</span>QUERY_STRING)</span>
<span id="cb160-47"><a href="appendix-lb-app.html#cb160-47" tabindex="-1"></a>            shiny<span class="sc">:::</span><span class="fu">httpResponse</span>(</span>
<span id="cb160-48"><a href="appendix-lb-app.html#cb160-48" tabindex="-1"></a>                <span class="at">status =</span> <span class="dv">200</span><span class="dt">L</span>,</span>
<span id="cb160-49"><a href="appendix-lb-app.html#cb160-49" tabindex="-1"></a>                <span class="at">content_type =</span> <span class="st">&quot;text/html; charset=UTF-8&quot;</span>,</span>
<span id="cb160-50"><a href="appendix-lb-app.html#cb160-50" tabindex="-1"></a>                <span class="at">content =</span> <span class="st">&quot;OK&quot;</span>,</span>
<span id="cb160-51"><a href="appendix-lb-app.html#cb160-51" tabindex="-1"></a>                <span class="at">headers =</span> <span class="fu">list</span>(<span class="st">&quot;Cache-Control&quot;</span> <span class="ot">=</span> <span class="st">&quot;no-cache&quot;</span>))</span>
<span id="cb160-52"><a href="appendix-lb-app.html#cb160-52" tabindex="-1"></a>        }</span>
<span id="cb160-53"><a href="appendix-lb-app.html#cb160-53" tabindex="-1"></a>    )</span>
<span id="cb160-54"><a href="appendix-lb-app.html#cb160-54" tabindex="-1"></a>    output<span class="sc">$</span>out <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb160-55"><a href="appendix-lb-app.html#cb160-55" tabindex="-1"></a>        <span class="fu">message</span>(<span class="st">&quot;Incoming connection&quot;</span>)</span>
<span id="cb160-56"><a href="appendix-lb-app.html#cb160-56" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">script</span>(</span>
<span id="cb160-57"><a href="appendix-lb-app.html#cb160-57" tabindex="-1"></a>            <span class="fu">sprintf</span>(<span class="st">&#39;</span></span>
<span id="cb160-58"><a href="appendix-lb-app.html#cb160-58" tabindex="-1"></a><span class="st">    const url = &quot;%s&quot;;</span></span>
<span id="cb160-59"><a href="appendix-lb-app.html#cb160-59" tabindex="-1"></a><span class="st">    const count_el = document.getElementById(&quot;count&quot;);</span></span>
<span id="cb160-60"><a href="appendix-lb-app.html#cb160-60" tabindex="-1"></a><span class="st">    const status_el = document.getElementById(&quot;status&quot;);</span></span>
<span id="cb160-61"><a href="appendix-lb-app.html#cb160-61" tabindex="-1"></a><span class="st">    let count = 0;</span></span>
<span id="cb160-62"><a href="appendix-lb-app.html#cb160-62" tabindex="-1"></a><span class="st">    async function check_url() {</span></span>
<span id="cb160-63"><a href="appendix-lb-app.html#cb160-63" tabindex="-1"></a><span class="st">        count_el.innerHTML = ++count;</span></span>
<span id="cb160-64"><a href="appendix-lb-app.html#cb160-64" tabindex="-1"></a><span class="st">        try {</span></span>
<span id="cb160-65"><a href="appendix-lb-app.html#cb160-65" tabindex="-1"></a><span class="st">            const resp = await fetch(url);</span></span>
<span id="cb160-66"><a href="appendix-lb-app.html#cb160-66" tabindex="-1"></a><span class="st">            if (!resp.ok) {</span></span>
<span id="cb160-67"><a href="appendix-lb-app.html#cb160-67" tabindex="-1"></a><span class="st">                status_el.innerHTML = &quot;Failure!&quot;;</span></span>
<span id="cb160-68"><a href="appendix-lb-app.html#cb160-68" tabindex="-1"></a><span class="st">                return;</span></span>
<span id="cb160-69"><a href="appendix-lb-app.html#cb160-69" tabindex="-1"></a><span class="st">            } else {</span></span>
<span id="cb160-70"><a href="appendix-lb-app.html#cb160-70" tabindex="-1"></a><span class="st">                status_el.innerHTML = &quot;In progress&quot;;</span></span>
<span id="cb160-71"><a href="appendix-lb-app.html#cb160-71" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb160-72"><a href="appendix-lb-app.html#cb160-72" tabindex="-1"></a><span class="st">        } catch(e) {</span></span>
<span id="cb160-73"><a href="appendix-lb-app.html#cb160-73" tabindex="-1"></a><span class="st">            status_el.innerHTML = &quot;Failure!&quot;;</span></span>
<span id="cb160-74"><a href="appendix-lb-app.html#cb160-74" tabindex="-1"></a><span class="st">            return;</span></span>
<span id="cb160-75"><a href="appendix-lb-app.html#cb160-75" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb160-76"><a href="appendix-lb-app.html#cb160-76" tabindex="-1"></a><span class="st">        if (count === 100) {</span></span>
<span id="cb160-77"><a href="appendix-lb-app.html#cb160-77" tabindex="-1"></a><span class="st">            status_el.innerHTML = &quot;Test complete&quot;;</span></span>
<span id="cb160-78"><a href="appendix-lb-app.html#cb160-78" tabindex="-1"></a><span class="st">            return;</span></span>
<span id="cb160-79"><a href="appendix-lb-app.html#cb160-79" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb160-80"><a href="appendix-lb-app.html#cb160-80" tabindex="-1"></a><span class="st">        setTimeout(check_url, 10);</span></span>
<span id="cb160-81"><a href="appendix-lb-app.html#cb160-81" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb160-82"><a href="appendix-lb-app.html#cb160-82" tabindex="-1"></a><span class="st">    check_url();</span></span>
<span id="cb160-83"><a href="appendix-lb-app.html#cb160-83" tabindex="-1"></a><span class="st">            &#39;</span>, url)</span>
<span id="cb160-84"><a href="appendix-lb-app.html#cb160-84" tabindex="-1"></a>        )</span>
<span id="cb160-85"><a href="appendix-lb-app.html#cb160-85" tabindex="-1"></a>    })</span>
<span id="cb160-86"><a href="appendix-lb-app.html#cb160-86" tabindex="-1"></a></span>
<span id="cb160-87"><a href="appendix-lb-app.html#cb160-87" tabindex="-1"></a>}</span>
<span id="cb160-88"><a href="appendix-lb-app.html#cb160-88" tabindex="-1"></a></span>
<span id="cb160-89"><a href="appendix-lb-app.html#cb160-89" tabindex="-1"></a>app <span class="ot">&lt;-</span> <span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>Install packages in R with <code>install.packages(c("shiny", "bslib"))</code>.
Run the app in R with <code>shiny::runApp("r", port = 8080)</code>
then visit <code>http://127.0.0.1:8080</code> in your browser.
You’ll see a counter running up to 100 and reporting the success of the test.</p>
</div>
<div id="shinylive-1" class="section level3 unnumbered hasAnchor">
<h3>Shinylive<a href="appendix-lb-app.html#shinylive-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create Python shinylive version following <a href="https://github.com/posit-dev/py-shinylive" class="uri">https://github.com/posit-dev/py-shinylive</a>
(you will need to have <code>shinylive</code> installed):</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb161-1"><a href="appendix-lb-app.html#cb161-1" tabindex="-1"></a><span class="ex">shinylive</span> export python py-shinylive</span>
<span id="cb161-2"><a href="appendix-lb-app.html#cb161-2" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> http.server <span class="at">--directory</span> py-shinylive 8008</span></code></pre></div>
<p>Create R shinylive version following <a href="https://github.com/posit-dev/r-shinylive" class="uri">https://github.com/posit-dev/r-shinylive</a>:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb162-1"><a href="appendix-lb-app.html#cb162-1" tabindex="-1"></a><span class="ex">R</span> <span class="at">-q</span> <span class="at">-e</span> <span class="st">&#39;shinylive::export(&quot;r&quot;, &quot;r-shinylive&quot;)&#39;</span></span>
<span id="cb162-2"><a href="appendix-lb-app.html#cb162-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">-q</span> <span class="at">-e</span> <span class="st">&#39;httpuv::runStaticServer(&quot;r-shinylive&quot;, port=8008)&#39;</span></span></code></pre></div>
</div>
<div id="test-load-balancing" class="section level3 unnumbered hasAnchor">
<h3>Test Load Balancing<a href="appendix-lb-app.html#test-load-balancing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The app is useful when the deployment includes load balancing between
multiple replicas. For sush deployments, session affinity (or sticky sessions) needs to
be available. This app can be used to test such setups.</p>
<p>If the test fails, it will stop before the counter reaches 100 and will say <em>Failure!</em>.
If the app succeeds 100 times, you’ll see <em>Test complete</em>.
The app is not useful for testing a single instance deployment, or with Shinylive,
because these setups won’t fail, try it!</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p><a href="https://github.com/rstudio/py-shiny/blob/7ba8f90a44ee25f41aa8c258eceeba6807e0017a/examples/load_balance/app.py" class="uri">https://github.com/rstudio/py-shiny/blob/7ba8f90a44ee25f41aa8c258eceeba6807e0017a/examples/load_balance/app.py</a><a href="appendix-lb-app.html#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="appendix-bananas.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix-how-to-pick.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/analythium/hosting-shiny-book/edit/main/05-02-appendix-lbtest.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
